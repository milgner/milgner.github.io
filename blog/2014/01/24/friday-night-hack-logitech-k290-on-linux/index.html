
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Friday Night Hack: Logitech K290 on Linux - Extroverted Introspection</title>
  <meta name="author" content="Marcus Ilgner">

  
  <meta name="description" content="TL;DR: If you have a Logitech K290 and want your F-keys to work regularly on Linux,
you can now. A few weeks ago I got myself a Logitech K290 &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://milgner.github.io/blog/2014/01/24/friday-night-hack-logitech-k290-on-linux/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="Extroverted Introspection" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=Arvo:400,400italic,700,700italic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=Merienda:700" rel="stylesheet" type="text/css">
<link href="/stylesheets/ma_il.css" rel="stylesheet" type="text/css">

 
 <script type="text/javascript">
 /* <![CDATA[ */
     (function() {
         var s = document.createElement('script'), t = document.getElementsByTagName('script')[0];
         s.type = 'text/javascript';
         s.async = true;
         s.src = 'http://api.flattr.com/js/0.6/load.js?mode=auto';
         t.parentNode.insertBefore(s, t);
     })();
 /* ]]> */
 </script>













<link rel="payment" href="https://flattr.com/submit/auto?url=http%3A%2F%2Fmilgner.github.io%2Fblog%2F2014%2F01%2F24%2Ffriday-night-hack-logitech-k290-on-linux%2F&amp;user_id=ma_il&amp;title=Friday+Night+Hack%3A+Logitech+K290+on+Linux&amp;category=text&amp;description=Writing+about+things+I+learn%2C+think+and+do.+Topics+may+involve+software+development%2C+psychology+and+music.&amp;tags=coding" type="text/html" />

  

</head>

<body>
  <div id="navigation">
    <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://www.duckduckgo.com/" method="get">
  <fieldset role="search">
    <input type="hidden" name="sites" value="duckduckgo.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search&hellip;"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  </div>
  <header role="banner"><hgroup>
  <h1><a href="/">Extroverted Introspection</a></h1>
  
    <h2>Me looking at new things</h2>
  
</hgroup>

</header>
  <div id="body"  >
    <div id="main">
      <div id="content">
        <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Friday Night Hack: Logitech K290 on Linux</h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-01-24T22:06:00+01:00" pubdate data-updated="true"></time>
        
      </p>
    
  </header>


<div class="entry-content"><p><strong>TL;DR</strong>: If you have a Logitech K290 and want your F-keys to work regularly on Linux,
<a href="https://github.com/milgner/k290-fnkeyctl">you can now</a>.</p>

<hr />

<p>A few weeks ago I got myself a <a href="www.logitech.com/product/comfort-keyboard-k290">Logitech K290</a> keyboard for my home
office. I really like how silent it is and the attack on the keys feels very nice, too. Also it is quite resistant
to crumbs, which were somehow always squeezing through the gaps of my former Cherry XStream.</p>

<p>But despite this, the keyboard has a major flaw: by default, the function keys work as a kind of &ldquo;multimedia&rdquo; keys
instead of good ol&#8217; <code>F1</code> through <code>F12</code>. On Windows that can easily be remedied by installing the Logitech Setpoint
software. But on Linux, where I do most of my hacking, it is a major PITA to always need to use the <code>Fn</code> modifier.</p>

<p>At first, I thought I&rsquo;d just have to roll with it or begin <em>The Chase For A Comfortable Keyboard</em> anew but after
accidentally shutting down my machine yesterday - when all I wanted to was to press F12, forgetting the modifier -,
I was overcome by a sudden Nerd Rage: this device obviously needed some serious hacking.</p>

<p>Equipped with cursory knowledge about the USB protocol and my usual can-do-attitude, I fired up the browser,
looking for a way to snoop on the USB traffic. After two unsuccessful tries, I came across <a href="http://desowin.org/usbpcap/">USBPcap</a>,
which can be used in conjunction with <a href="http://wireshark.org/">Wireshark</a> to do USB protocol analysis.</p>

<p>After a few tries it became quickly apparent that toggling the checkbox in the Windows software would send one specific
control packet to the device, so I decided to write a small tool to do exactly this on Linux.</p>

<p>At first it did not work, because I used the simplified <code>libusb_open_device_with_vid_pid</code> function from libusb which
has no proper error reporting. So I added proper device enumeration and found that the error was <code>LIBUSB_ERROR_ACCESS</code>.
And behold: running it via <code>sudo</code> made everything work on the first try!</p>

<p>So this concludes a wonderfully entertaining friday night. :D</p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Marcus Ilgner</span></span>

      








  


<time datetime="2014-01-24T22:06:00+01:00" pubdate data-updated="true"></time>
      

<span class="categories">
  
    <a class='category' href='/blog/categories/coding/'>coding</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://milgner.github.io/blog/2014/01/24/friday-night-hack-logitech-k290-on-linux/" data-via="" data-counturl="http://milgner.github.io/blog/2014/01/24/friday-night-hack-logitech-k290-on-linux/" >Tweet</a>
  
  
  
  
    <a class="FlattrButton" style="display:none;"
    title="Friday Night Hack: Logitech K290 on Linux"
    data-flattr-uid="ma_il"
    data-flattr-tags="coding"
    data-flattr-button="compact"
    data-flattr-category="text"
    href="http://milgner.github.io/blog/2014/01/24/friday-night-hack-logitech-k290-on-linux/">
    **TL;DR**: If you have a Logitech K290 and want your F-keys to work regularly on Linux,
[you can now](https://github.com/milgner/k290-fnkeyctl).

- - -

A few weeks ago I got myself a [Logitech K290](www.logitech.com/product/comfort-keyboard-k290) keyboard for my home
office. I really like how silent it is and the attack on the keys feels very nice, too. Also it is quite resistant 
to crumbs, which were somehow always squeezing through the gaps of my former Cherry XStream.

But despite this, &hellip;
</a>

  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2014/01/10/a-cheer-for-ignorance/" title="Previous Post: A cheer for ignorance">&laquo; A cheer for ignorance</a>
      
      
        <a class="basic-alignment right" href="/blog/2014/03/02/numenera-a-random-focus/" title="Next Post: Numenera: a random focus">Numenera: a random focus &raquo;</a>
      
    </p>
  </footer>
</article>

</div>

<aside class="sidebar">
  
    <section class="about">
  <h1>About Me</h1>
  <p>My name is Marcus Ilgner and I&#8217;m a software developer from Cologne, Germany.</p>
  <img src="/images/portrait_small.jpg" alt="It's me, @ma_il!" width="100" height="150" />
  <p>On this blog I write about educational courses I take, books I read and post the occasional rambling about other things that go on in my mind.</p>
  <p>Topics will range from computer-related subjects to social sciences and philosophy. You have been warned.</p>

  <h4>Contact Information</h4>
  <p>E-Mail: <a href="mailto:mail@marcusilgner.com">mail@marcusilgner.com</a><br />
  GPG Key <code>0x2F71FB99</code>, Fingerprint:<code>AEEE AC81 5481 C57A A2A6<br />
C3AD E31D 682E 2F71 FB99</code></p>
</section>
  <style>
    #customize-list{
      float:left;
      margin-left:0px;
      list-style:none;
    }
    #gr_updates_widget{
      float:left;
      background-color:#fff;
      padding:0px 0 20px 0px;
      width:300px;
      height:365px;
    }
    #gr_footer{
      margin-bottom:0px;
      height:30px;
    }
    #gr_updates_widget p{
      padding:0px;
      margin:0;
      font-size:14px;
    }
    .gr_reviews_header {
      display: none;
    }
    #gr_footer img{
      display: none;
      width:100px;
      float:left;
    }
  </style>
  <div id="gr_updates_widget">
    <h4>My Goodreads updates</h4>
    <iframe id="the_iframe" src="http://goodreads.com/widgets/user_update_widget?height=400&num_updates=3&user=24157935&width=300" width="298" height="330" frameborder="0"></iframe>
          <div id="gr_footer">
            <a href="https://www.goodreads.com/"><img alt="Goodreads: Book reviews, recommendations, and discussion" src="https://www.goodreads.com/images/layout/goodreads_logo_140.png" /></a>
          </div>
        </div>
<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  
  <a href="https://github.com/milgner">@milgner</a> on GitHub
  
  <script type="text/javascript">
    $.domReady(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'milgner',
            count: 5,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>

<section id="friend_of_gnome">
	<a href="http://www.gnome.org/friends/"><img src="http://www-old.gnome.org/friends/banners/friends-of-gnome.png" alt="Become a Friend of GNOME" border="0" /></a> 
</section>

  
</aside>


      </div>
    </div>
    <footer role="contentinfo"><p>
<a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/de/deed.en_GB"><img alt="Creative Commons Licence" style="border-width:0" src="http://i.creativecommons.org/l/by-nc-sa/3.0/de/80x15.png" /></a> Copyright &copy; 2014 Marcus Ilgner. All of my blog posts are published under a <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/de/deed.en_GB">Creative Commons Attribution-NonCommercial-ShareAlike 3.0 Germany License</a>.
<br />
For licensing of my Open-Source projects, please see their respective sourcecode repositories.
<br />
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a>. Design by <a href="http://octopressthemes.com">Octopress Themes</a></span>
<br />
  <a href="/imprint">Imprint</a>
</p>

</footer>
    







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





  </div>
</body>
</html>
